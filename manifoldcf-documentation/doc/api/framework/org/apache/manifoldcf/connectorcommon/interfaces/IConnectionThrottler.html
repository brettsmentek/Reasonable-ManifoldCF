<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sat Apr 16 18:39:37 EDT 2016 -->
<title>IConnectionThrottler</title>
<meta name="date" content="2016-04-16">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IConnectionThrottler";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IConnectionThrottler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IBreakCheck.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IFetchThrottler.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html" target="_top">Frames</a></li>
<li><a href="IConnectionThrottler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.manifoldcf.connectorcommon.interfaces</div>
<h2 title="Interface IConnectionThrottler" class="title">Interface IConnectionThrottler</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../org/apache/manifoldcf/connectorcommon/throttler/Throttler.ConnectionThrottler.html" title="class in org.apache.manifoldcf.connectorcommon.throttler">Throttler.ConnectionThrottler</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">IConnectionThrottler</span></pre>
<div class="block">An IConnectionThrottler object is not thread-local.  It gates connection
 creation and pool management.
 The underlying model is a pool of connections.  A connection gets pulled off the pool and
 used to perform a fetch.  If there are insufficient connections in the pool, and there is
 sufficient capacity to create a new connection, a connection will be created instead.
 When the fetch is done, the connection is returned, and then there is a decision whether
 or not to put the connection back into the pool, or to destroy it.  Finally, the pool is
 periodically evaluated, and connections may be destroyed if either they have expired,
 or the allocated connections are still over capacity.

 This object does not in itself contain a connection pool - but it is intended to assist
 in the management of that pool.  Specifically, it tracks connections that are in the
 pool, and connections that are handed out for use, and performs ALL the waiting needed
 due to the pool being empty and/or the number of active connections being at or over
 the quota.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#_rcsid">_rcsid</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#CONNECTION_FROM_CREATION">CONNECTION_FROM_CREATION</a></strong></code>
<div class="block">Create a connection</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#CONNECTION_FROM_NOWHERE">CONNECTION_FROM_NOWHERE</a></strong></code>
<div class="block">Pool shutting down</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#CONNECTION_FROM_POOL">CONNECTION_FROM_POOL</a></strong></code>
<div class="block">Get the connection from the pool</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#checkDestroyPooledConnection()">checkDestroyPooledConnection</a></strong>()</code>
<div class="block">This method calculates whether a connection should be taken from the pool and destroyed
  /* in order to meet quota requirements.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#checkExpireConnection()">checkExpireConnection</a></strong>()</code>
<div class="block">Connection expiration is tricky, because even though a connection may be identified as
 being expired, at the very same moment it could be handed out in another thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IFetchThrottler.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces">IFetchThrottler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#getNewConnectionFetchThrottler()">getNewConnectionFetchThrottler</a></strong>()</code>
<div class="block">For a new connection, obtain the fetch throttler to use for the connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#noteConnectionDestroyed()">noteConnectionDestroyed</a></strong>()</code>
<div class="block">Note that a connection has been destroyed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#noteConnectionReturnedToPool()">noteConnectionReturnedToPool</a></strong>()</code>
<div class="block">Note that a connection has been returned to the pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#noteReturnedConnection()">noteReturnedConnection</a></strong>()</code>
<div class="block">This method indicates whether a formerly in-use connection should be placed back
 in the pool or destroyed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#waitConnectionAvailable()">waitConnectionAvailable</a></strong>()</code>
<div class="block">Get permission to grab a connection for use.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html#waitConnectionAvailable(org.apache.manifoldcf.connectorcommon.interfaces.IBreakCheck)">waitConnectionAvailable</a></strong>(<a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IBreakCheck.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces">IBreakCheck</a>&nbsp;breakCheck)</code>
<div class="block">Get permission to grab a connection for use.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="_rcsid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_rcsid</h4>
<pre>static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> _rcsid</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.manifoldcf.connectorcommon.interfaces.IConnectionThrottler._rcsid">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CONNECTION_FROM_POOL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONNECTION_FROM_POOL</h4>
<pre>static final&nbsp;int CONNECTION_FROM_POOL</pre>
<div class="block">Get the connection from the pool</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.manifoldcf.connectorcommon.interfaces.IConnectionThrottler.CONNECTION_FROM_POOL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CONNECTION_FROM_CREATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONNECTION_FROM_CREATION</h4>
<pre>static final&nbsp;int CONNECTION_FROM_CREATION</pre>
<div class="block">Create a connection</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.manifoldcf.connectorcommon.interfaces.IConnectionThrottler.CONNECTION_FROM_CREATION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CONNECTION_FROM_NOWHERE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CONNECTION_FROM_NOWHERE</h4>
<pre>static final&nbsp;int CONNECTION_FROM_NOWHERE</pre>
<div class="block">Pool shutting down</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.manifoldcf.connectorcommon.interfaces.IConnectionThrottler.CONNECTION_FROM_NOWHERE">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="waitConnectionAvailable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitConnectionAvailable</h4>
<pre>int&nbsp;waitConnectionAvailable()
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Get permission to grab a connection for use.  If this object believes there is a connection
 available in the pool, it will update its pool size variable and return   If not, this method
 evaluates whether a new connection should be created.  If neither condition is true, it
 waits until a connection is available.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>whether to take the connection from the pool, or create one, or whether the
 throttler is being shut down.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="waitConnectionAvailable(org.apache.manifoldcf.connectorcommon.interfaces.IBreakCheck)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitConnectionAvailable</h4>
<pre>int&nbsp;waitConnectionAvailable(<a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IBreakCheck.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces">IBreakCheck</a>&nbsp;breakCheck)
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                   <a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/BreakException.html" title="class in org.apache.manifoldcf.connectorcommon.interfaces">BreakException</a></pre>
<div class="block">Get permission to grab a connection for use.  If this object believes there is a connection
 available in the pool, it will update its pool size variable and return   If not, this method
 evaluates whether a new connection should be created.  If neither condition is true, it
 waits until a connection is available.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>whether to take the connection from the pool, or create one, or whether the
 throttler is being shut down.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/BreakException.html" title="class in org.apache.manifoldcf.connectorcommon.interfaces">BreakException</a></code></dd></dl>
</li>
</ul>
<a name="getNewConnectionFetchThrottler()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewConnectionFetchThrottler</h4>
<pre><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IFetchThrottler.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces">IFetchThrottler</a>&nbsp;getNewConnectionFetchThrottler()</pre>
<div class="block">For a new connection, obtain the fetch throttler to use for the connection.
 If the result from waitConnectionAvailable() is CONNECTION_FROM_CREATION,
 the calling code is expected to create a connection using the result of this method.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the fetch throttler for a new connection.</dd></dl>
</li>
</ul>
<a name="noteReturnedConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noteReturnedConnection</h4>
<pre>boolean&nbsp;noteReturnedConnection()</pre>
<div class="block">This method indicates whether a formerly in-use connection should be placed back
 in the pool or destroyed.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the connection should not be put into the pool but should instead
  simply be destroyed.  If true is returned, the caller MUST call noteConnectionDestroyed()
  after the connection is destroyed in order for the bookkeeping to work.  If false
  is returned, the caller MUST call noteConnectionReturnedToPool() after the connection
  is returned to the pool.</dd></dl>
</li>
</ul>
<a name="checkDestroyPooledConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDestroyPooledConnection</h4>
<pre>boolean&nbsp;checkDestroyPooledConnection()</pre>
<div class="block">This method calculates whether a connection should be taken from the pool and destroyed
  /* in order to meet quota requirements.  If this method returns
  /* true, you MUST remove a connection from the pool, and you MUST call
  /* noteConnectionDestroyed() afterwards.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if a pooled connection should be destroyed.  If true is returned, the
 caller MUST call noteConnectionDestroyed() (below) in order for the bookkeeping to work.</dd></dl>
</li>
</ul>
<a name="checkExpireConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkExpireConnection</h4>
<pre>boolean&nbsp;checkExpireConnection()</pre>
<div class="block">Connection expiration is tricky, because even though a connection may be identified as
 being expired, at the very same moment it could be handed out in another thread.  So there
 is a natural race condition present.
 The way the connection throttler deals with that is to allow the caller to reserve a connection
 for expiration.  This must be called BEFORE the actual identified connection is removed from the
 connection pool.  If the value returned by this method is "true", then a connection MUST be removed
 from the pool and destroyed, whether or not the identified connection is actually still available for
 destruction or not.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if a connection from the pool can be expired.  If true is returned, noteConnectionDestruction()
  MUST be called once the connection has actually been destroyed.</dd></dl>
</li>
</ul>
<a name="noteConnectionReturnedToPool()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noteConnectionReturnedToPool</h4>
<pre>void&nbsp;noteConnectionReturnedToPool()</pre>
<div class="block">Note that a connection has been returned to the pool.  Call this method after a connection has been
 placed back into the pool and is available for use.</div>
</li>
</ul>
<a name="noteConnectionDestroyed()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>noteConnectionDestroyed</h4>
<pre>void&nbsp;noteConnectionDestroyed()</pre>
<div class="block">Note that a connection has been destroyed.  Call this method ONLY after noteReturnedConnection()
 or checkDestroyPooledConnection() returns true, AND the connection has been already
 destroyed.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IConnectionThrottler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IBreakCheck.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/manifoldcf/connectorcommon/interfaces/IFetchThrottler.html" title="interface in org.apache.manifoldcf.connectorcommon.interfaces"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/manifoldcf/connectorcommon/interfaces/IConnectionThrottler.html" target="_top">Frames</a></li>
<li><a href="IConnectionThrottler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
